// Js prerequisites:// 1.7.2/jquery.min.js// jquery.storage.js// jquery.json-2.2.min// jquery.purl.pp.js// head.load.min.jsvar bootstrapped = 0;var wla_gaTracker = null;var wla_googa_prefix = null;var wla_googa_keys = null;var wla_boot_config = window.bootstrap_config;// Site config urlvar __config_url = wla_boot_config['config_url'];//====================// Site lang url// http://www.lumarnia.com/index_rega.html?lang=en&gr_refer=adw_3window.CONST_JSSTORE_LANG = "gr_lang";var lang_marks_defn = [	{lang:'ru',query:["lang=ru"],referrer:[".ru",".ua"],browser_lang:["ru","ua"]},	{lang:'lt',query:["lang=lt"],referrer:[],browser_lang:["lt"]},	{lang:'en',query:["lang=en"],referrer:[".com"],browser_lang:["en"]}];function _check_langMarks(mark_field, mark_source){	for(var i=0;i<lang_marks_defn.length;i++){		for(var j=0;j<lang_marks_defn[i][mark_field].length;j++){			if(mark_source.indexOf(lang_marks_defn[i][mark_field][j]) >= 0){				return lang_marks_defn[i].lang;			}		}	}	return null;}window.jq_getLangs = function() {	var res = [];	for(var li=0;li<lang_marks_defn.length;li++){		res.push(lang_marks_defn[li].lang);	}	return res;}window.jq_detectLang = function(reset2auto) {	var stored_lang = $.Storage.get(window.CONST_JSSTORE_LANG);	if(document.location.href.indexOf("lang=auto") >= 0 || document.location.href.indexOf("lang_reset=1") >= 0){		stored_lang = null;	}	if(stored_lang == null || stored_lang.length == 0 || reset2auto){		stored_lang = null;		// Browser lang		// step 1 - query string		if(stored_lang == null){			var lng_by_query = _check_langMarks("query",""+document.location.href);			if(lng_by_query != null){				stored_lang = lng_by_query;				reset2auto = true;			}		}		// step 2 - from referrer		if(stored_lang == null && window.bootstrap_config['referrer'] != null){			var referrer = window.bootstrap_config['referrer'].toLowerCase();			var lng_by_referrer = _check_langMarks("referrer",referrer);			if(lng_by_referrer != null){				stored_lang = lng_by_referrer;			}		}		// step 3 - accept language		if(stored_lang == null && window.bootstrap_config['languages'] != null){			var accteptlngs = window.bootstrap_config['languages'].split(";");			if(accteptlngs.length > 0){				var lng_by_accteptlngs = _check_langMarks("browser_lang",accteptlngs[0]);				if(lng_by_accteptlngs != null){					stored_lang = lng_by_accteptlngs;				}			}		}		if(stored_lang != null && reset2auto){			$.Storage.set(window.CONST_JSSTORE_LANG, stored_lang);		}	}	return stored_lang;}//====================window.jq_switch2Lang = function(new_lang) {	if(wla_boot_config['lang_'+new_lang] != null){		$.Storage.set(window.CONST_JSSTORE_LANG, new_lang);		window.location.reload();	}}window.jq_statHit = function(params) {	var page = params.page;	var ev_categ = params.ev_categ;	var ev_action = params.ev_action;	var ev_label = params.ev_label;	var ev_int = params.ev_int;	if(bootstrapped == 0){		setTimeout(function(){jq_statHit(params);},300);		return;	}	if(wla_gaTracker == null){		return;	}	core_log("jq_statHit",params);	if(core_len(params.customVar1) >= 2){		wla_gaTracker._setCustomVar(1,params.customVar1[0],params.customVar1[1],1);	}	if(core_len(params.customVar2) >= 2){		wla_gaTracker._setCustomVar(2,params.customVar2[0],params.customVar2[1],1);	}	if(core_len(params.customVar3) >= 2){		wla_gaTracker._setCustomVar(3,params.customVar3[0],params.customVar3[1],1);	}	if(core_len(params.customVar4) >= 2){		wla_gaTracker._setCustomVar(4,params.customVar4[0],params.customVar4[1],1);	}	if(core_len(params.customVar5) >= 2){		wla_gaTracker._setCustomVar(5,params.customVar5[0],params.customVar5[1],1);	}	if(core_coalesce(page,"") != ""){		if(wla_googa_prefix != null){			page = wla_googa_prefix+"/"+page;		}		wla_gaTracker._trackPageview(page);	}	if(core_coalesce(ev_categ,"") != "" || core_coalesce(ev_action,"") != "" || core_coalesce(ev_label,"") != ""){		ev_int = core_coalesce(ev_int,0);		if(core_coalesce(ev_label,"") == ""){			ev_label = core_coalesce(page,"_other");		}		wla_gaTracker._trackEvent(ev_categ,ev_action,ev_label,ev_int);	}};var __lang_url = wla_boot_config['lang_default'];var stored_lang = jq_detectLang(false);if(stored_lang != null && wla_boot_config['lang_'+stored_lang] != null){	__lang_url = wla_boot_config['lang_'+stored_lang];}var __onAllOk = null;var __bootstrapForJs = "/site_logic.js";function jq_bootstrap(onAllOk, mainscript) {	// Will be loaded later	__onAllOk = onAllOk;	if(mainscript){		__bootstrapForJs = mainscript;	}		head.js(	"http://static.lumarnia.com/scripts/gr_config.jquery.js"	, __config_url, __lang_url	,"http://static.lumarnia.com/scripts/gr_coreutils.js"	,"http://static.lumarnia.com/scripts/gr_server_api.js"	,"http://www.google-analytics.com/ga.js"	,(__bootstrapForJs.length>3)?__bootstrapForJs:null	,function(){		core_log("Bootstrap: referrer="+window.bootstrap_config['referrer']+"; document.domain="+document.domain);		core_log("Bootstrap: lang="+stored_lang+"; languages="+window.bootstrap_config['languages']);		wla_googa_prefix = $._conf("app_id");		wla_googa_keys = $._conf("google_analytics_key");		if(_gat){			wla_gaTracker = _gat._createTracker(wla_googa_keys);		}		bootstrapped++;		if(__onAllOk != null){			__onAllOk();			__onAllOk = null;		}	});}